{"ast":null,"code":"import _slicedToArray from\"/Users/macbookpro/Fossetic/front_fossetic/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import fosseticImg from\"../assets/images/fossetic.png\";import{useHistory}from'react-router-dom';import Axios from'axios';import Auth from\"../services/auth\";import CheckButton from\"react-validation/build/button\";import Form from\"react-validation/build/form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"This field is required!\"});}};var Login=function Login(){var form=useRef();var checkBtn=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var history=useHistory();var onChangeEmail=function onChangeEmail(e){var email=e.target.value;setEmail(email);};var onChangePassword=function onChangePassword(e){var password=e.target.value;setPassword(password);};var handleLogin=function handleLogin(e){e.preventDefault();setMessage(\"\");setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){Auth.login(email,password).then(function(){history.push(\"/profile\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setMessage(resMessage);});}else{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-bg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"r\"}),/*#__PURE__*/_jsx(\"span\",{className:\"r s\"}),/*#__PURE__*/_jsx(\"span\",{className:\"r s\"}),/*#__PURE__*/_jsx(\"span\",{className:\"r\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:fosseticImg,alt:\"\",className:\"profile-img-card\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,ref:form,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);},validations:[required]})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"Mot de passe\",onChange:function onChange(e){return setPassword(e.target.value);},validations:[required]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group text-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox checkbox-fill d-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"checkbox-fill-1\",id:\"checkbox-fill-a1\",checked:\"\"}),/*#__PURE__*/_jsx(\"label\",{for:\"checkbox-fill-a1\",className:\"cr\",children:\" Se souvenir de moi\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",onClick:handleLogin,value:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2 text-muted\",children:[\"Mot de passe oubli\\xE9? \",/*#__PURE__*/_jsx(\"a\",{href:\"auth-reset-password.html\",children:\"Rejetter\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})]})})]})});};export default Login;","map":{"version":3,"sources":["/Users/macbookpro/Fossetic/front_fossetic/src/components/login.js"],"names":["React","useEffect","useState","useRef","fosseticImg","useHistory","Axios","Auth","CheckButton","Form","required","value","Login","form","checkBtn","email","setEmail","password","setPassword","loading","setLoading","message","setMessage","history","onChangeEmail","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","push","window","location","reload","error","resMessage","response","data","toString","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport fosseticImg from \"../assets/images/fossetic.png\";\nimport {useHistory} from 'react-router-dom'\nimport PropTypes from 'prop-types';\nimport Axios from 'axios'\nimport Auth from \"../services/auth\";\n\nimport CheckButton from \"react-validation/build/button\";\nimport Form from \"react-validation/build/form\";\n\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\n\n\n\nconst Login = () => {\n  const form = useRef();\n  const checkBtn = useRef();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const history = useHistory();\n\n  const onChangeEmail = (e) => {\n    const email = e.target.value;\n    setEmail(email);\n  };\n\n  const onChangePassword = (e) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      Auth.login(email, password).then(\n        () => {\n          history.push(\"/profile\");\n          window.location.reload();\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n\n\n\n\n\n   \n\n\n  return (\n\n    <div className=\"auth-wrapper\">\n    <div className=\"auth-content\">\n        <div className=\"auth-bg\">\n            <span className=\"r\"></span>\n            <span className=\"r s\"></span>\n            <span className=\"r s\"></span>\n            <span className=\"r\"></span>\n        </div>\n        <div className=\"card\">\n            <div className=\"card-body text-center\">\n                <div className=\"mb-4\">\n                <img src={fosseticImg} alt=\"\" className=\"profile-img-card\"/>\n\n                </div>\n                <h3 className=\"mb-4\">Login</h3>\n                <Form onSubmit={handleLogin} ref={form}> \n\n                <div className=\"input-group mb-3\">\n                    <input type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Email\"  onChange={e => setEmail(e.target.value)}  validations={[required]} />\n                </div>\n                <div className=\"input-group mb-4\">\n                    <input type=\"password\" className=\"form-control\" name=\"password\"   placeholder=\"Mot de passe\" onChange={e => setPassword(e.target.value)}  validations={[required]} />\n              </div>\n                <div className=\"form-group text-left\">\n                    <div className=\"checkbox checkbox-fill d-inline\">\n                        <input type=\"checkbox\" name=\"checkbox-fill-1\" id=\"checkbox-fill-a1\" checked=\"\"/>\n                        <label for=\"checkbox-fill-a1\" className=\"cr\"> Se souvenir de moi</label>\n                    </div>\n                </div>\n                \n                 <input type=\"button\" onClick={handleLogin} value=\"Login\" />\n              \n                <p className=\"mb-2 text-muted\">Mot de passe oublié? <a href=\"auth-reset-password.html\">Rejetter</a></p>\n                {message && (\n            <div className=\"form-group\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                {message}\n              </div>\n            </div>\n          )}\n      \n      <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n                </Form>\n\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n);\n}\n\n\n\n\n\n\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}